<!DOCTYPE html>
<html>
  <head>
    <script src="lib/require.js"></script>
    <script src="lib/URI.js"></script>
    <!-- Initialize and layout -->

    <canvas id="canvas" width="490" height="490"></canvas>
    
    <!-- Render questionaire -->
    <script type="text/javascript">
      requirejs([
        "enso",
        'core/diagram/code/stencil'
      ],
      function(Enso, Stencil) {

        var data_file = "door.state_machine" //  "state_machine.schema"; // "schema.schema" 
				
				var canvas = document.getElementById('canvas')
				var context = canvas.getContext('2d')
				//document.documentElement.appendChild(canvas)
				
				console.log("Constructing...")
				
			  var stencil = Stencil.StencilFrame.new(window, canvas, context)
				stencil.set_path(data_file)			  
				console.log("Rendering...")
				
				const ipc = require('electron').ipcRenderer	
				
				ipc.on('do-new', (event, message) => {
		      console.log(message);  // Prints "whoooooooh!"
    		});
    
				ipc.on('do-open', function (event, file) {
					stencil.do_open(file)
				})				
				
				ipc.on('do-save', function (event) {
					stencil.on_save()
				})				
	    })
    </script>
  </head>
  <title></title>
  <body>
</html>
