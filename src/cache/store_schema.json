{
  "filename": "store.schema",
  "source": "demo/Store/models/store.schema",
  "date": "2019-07-19 13:49:02 +0800",
  "checksum": "34a03a0b5d93f9b63601696f2d65bdb704b49956",
  "depends": [
    {
      "filename": "schema.grammar",
      "source": "core/schema/models/schema.grammar",
      "date": "2019-07-18 16:09:47 +0800",
      "checksum": "31fb8534f09c4380852aa26d02d79bed484c0d11"
    },
    {
      "filename": "schema.schema",
      "source": "core/schema/models/schema.schema",
      "date": "2018-01-01 08:47:35 +0800",
      "checksum": "36a20ad876a14f149ede32638ec0cc9f1b549159"
    }
  ],
  "model": {
    "class": "Schema",
    "types#": [
      {
        "class": "Class",
        "name=": "Store",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "name",
            "owner": "types[Store]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "products",
            "owner": "types[Store]",
            "type": "types[Product]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Product].defined_fields[store]",
            "traversal=": true
          },
          {
            "class": "Field",
            "name=": "customers",
            "owner": "types[Store]",
            "type": "types[Customer]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Customer].defined_fields[store]",
            "traversal=": true
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Customer",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "id",
            "owner": "types[Customer]",
            "type": "types[str]",
            "key=": true
          },
          {
            "class": "Field",
            "name=": "first_name",
            "owner": "types[Customer]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "last_name",
            "owner": "types[Customer]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "reviews",
            "owner": "types[Customer]",
            "type": "types[Review]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Review].defined_fields[author]",
            "traversal=": true
          },
          {
            "class": "Field",
            "name=": "orders",
            "owner": "types[Customer]",
            "type": "types[Order]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Order].defined_fields[customer]",
            "traversal=": true
          },
          {
            "class": "Field",
            "name=": "shipping_address",
            "owner": "types[Customer]",
            "type": "types[Address]",
            "traversal=": true
          },
          {
            "class": "Field",
            "name=": "billing_address",
            "owner": "types[Customer]",
            "type": "types[Address]",
            "optional=": true,
            "traversal=": true
          },
          {
            "class": "Field",
            "name=": "store",
            "owner": "types[Customer]",
            "type": "types[Store]",
            "inverse": "types[Store].defined_fields[customers]"
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Address",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "street",
            "owner": "types[Address]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "city",
            "owner": "types[Address]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "zip",
            "owner": "types[Address]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "country",
            "owner": "types[Address]",
            "type": "types[Country]",
            "optional=": true
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Country",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "name",
            "owner": "types[Country]",
            "type": "types[str]",
            "key=": true
          },
          {
            "class": "Field",
            "name=": "short_name",
            "owner": "types[Country]",
            "type": "types[str]"
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Product",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "name",
            "owner": "types[Product]",
            "type": "types[str]",
            "key=": true
          },
          {
            "class": "Field",
            "name=": "store",
            "owner": "types[Product]",
            "type": "types[Store]",
            "inverse": "types[Store].defined_fields[products]"
          },
          {
            "class": "Field",
            "name=": "description",
            "owner": "types[Product]",
            "type": "types[str]",
            "optional=": true
          },
          {
            "class": "Field",
            "name=": "price",
            "owner": "types[Product]",
            "type": "types[real]"
          },
          {
            "class": "Field",
            "name=": "rating",
            "owner": "types[Product]",
            "type": "types[real]",
            "computed": {
              "class": "EFunCall",
              "fun": {
                "class": "EVar",
                "name=": "AVERAGE"
              },
              "params": [
                {
                  "class": "EField",
                  "e": {
                    "class": "EVar",
                    "name=": "reviews"
                  },
                  "fname=": "rating"
                }
              ]
            }
          },
          {
            "class": "Field",
            "name=": "inventory",
            "owner": "types[Product]",
            "type": "types[int]"
          },
          {
            "class": "Field",
            "name=": "reviews",
            "owner": "types[Product]",
            "type": "types[Review]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Review].defined_fields[product]"
          },
          {
            "class": "Field",
            "name=": "items",
            "owner": "types[Product]",
            "type": "types[Item]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Item].defined_fields[product]"
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Order",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "id",
            "owner": "types[Order]",
            "type": "types[str]",
            "key=": true
          },
          {
            "class": "Field",
            "name=": "tracking",
            "owner": "types[Order]",
            "type": "types[int]",
            "optional=": true
          },
          {
            "class": "Field",
            "name=": "total",
            "owner": "types[Order]",
            "type": "types[real]",
            "optional=": true,
            "computed": {
              "class": "EFunCall",
              "fun": {
                "class": "EVar",
                "name=": "SUM"
              },
              "params": [
                {
                  "class": "EField",
                  "e": {
                    "class": "EVar",
                    "name=": "items"
                  },
                  "fname=": "total"
                }
              ]
            }
          },
          {
            "class": "Field",
            "name=": "items",
            "owner": "types[Order]",
            "type": "types[Item]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Item].defined_fields[order]",
            "traversal=": true
          },
          {
            "class": "Field",
            "name=": "customer",
            "owner": "types[Order]",
            "type": "types[Customer]",
            "inverse": "types[Customer].defined_fields[orders]"
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Item",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "order",
            "owner": "types[Item]",
            "type": "types[Order]",
            "inverse": "types[Order].defined_fields[items]"
          },
          {
            "class": "Field",
            "name=": "quantity",
            "owner": "types[Item]",
            "type": "types[int]"
          },
          {
            "class": "Field",
            "name=": "shipped",
            "owner": "types[Item]",
            "type": "types[bool]"
          },
          {
            "class": "Field",
            "name=": "product",
            "owner": "types[Item]",
            "type": "types[Product]",
            "inverse": "types[Product].defined_fields[items]"
          },
          {
            "class": "Field",
            "name=": "total",
            "owner": "types[Item]",
            "type": "types[real]",
            "computed": {
              "class": "EBinOp",
              "op=": "*",
              "e1": {
                "class": "EVar",
                "name=": "quantity"
              },
              "e2": {
                "class": "EField",
                "e": {
                  "class": "EVar",
                  "name=": "product"
                },
                "fname=": "price"
              }
            }
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Review",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "comment",
            "owner": "types[Review]",
            "type": "types[str]"
          },
          {
            "class": "Field",
            "name=": "date",
            "owner": "types[Review]",
            "type": "types[date]"
          },
          {
            "class": "Field",
            "name=": "rating",
            "owner": "types[Review]",
            "type": "types[int]"
          },
          {
            "class": "Field",
            "name=": "product",
            "owner": "types[Review]",
            "type": "types[Product]",
            "inverse": "types[Product].defined_fields[reviews]"
          },
          {
            "class": "Field",
            "name=": "author",
            "owner": "types[Review]",
            "type": "types[Customer]",
            "inverse": "types[Customer].defined_fields[reviews]"
          },
          {
            "class": "Field",
            "name=": "photos",
            "owner": "types[Review]",
            "type": "types[Photo]",
            "optional=": true,
            "many=": true,
            "inverse": "types[Photo].defined_fields[review]",
            "traversal=": true
          }
        ]
      },
      {
        "class": "Class",
        "name=": "Photo",
        "schema": "",
        "defined_fields#": [
          {
            "class": "Field",
            "name=": "review",
            "owner": "types[Photo]",
            "type": "types[Review]",
            "inverse": "types[Review].defined_fields[photos]"
          },
          {
            "class": "Field",
            "name=": "image",
            "owner": "types[Photo]",
            "type": "types[bitmap]"
          }
        ]
      },
      {
        "class": "Primitive",
        "name=": "str",
        "schema": ""
      },
      {
        "class": "Primitive",
        "name=": "date",
        "schema": ""
      },
      {
        "class": "Primitive",
        "name=": "bool",
        "schema": ""
      },
      {
        "class": "Primitive",
        "name=": "int",
        "schema": ""
      },
      {
        "class": "Primitive",
        "name=": "real",
        "schema": ""
      },
      {
        "class": "Primitive",
        "name=": "bitmap",
        "schema": ""
      }
    ]
  }
}